{"version":3,"file":"main.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/view.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/index.js"],"sourcesContent":["export function fetchLogin(username) {\n  return fetch('/api/session/', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify( { username } ),\n  })\n  .catch( err => Promise.reject({ error: 'network-error' }) )\n  .then( response => {\n    if(!response.ok) {\n      return response.json().then( err => Promise.reject(err) );\n    }\n    return response.json(); // happy status code means resolve with data from service\n  });\n}\n\nexport function checkSession() {\n  return fetch('/api/session/', {\n    method: 'GET',\n    headers: {\n      'content-type': 'application/json',\n    }\n  })\n    .catch( err => Promise.reject({ error: 'network-error' }) )\n    .then( response => {\n      if(!response.ok) {\n        return response.json().then( err => Promise.reject(err) );\n      }\n      return response.json();\n    });\n}\n\nexport function logout() {\n  return fetch('/api/session/', {\n    method: 'DELETE',\n    headers: {\n      'content-type': 'application/json',\n    }\n  })\n    .catch( err => Promise.reject({ error: 'network-error' }) )\n    .then( response => {\n      if(!response.ok) {\n        return response.json().then( err => Promise.reject(err) );\n      }\n      return response.json();\n    });\n}\n\nexport function fetchUsers() {\n  return fetch('/api/users/', {\n    method: 'GET',\n    headers: {\n      'content-type': 'application/json',\n    }\n  })\n    .catch( err => Promise.reject({ error: 'network-error' }) )\n    .then( response => {\n      if(!response.ok) {\n        return response.json().then( err => Promise.reject(err) );\n      }\n      return response.json();\n    });\n}\n\n\n\n","export function renderLogin(rootEl) {\r\n  rootEl.innerHTML = `\r\n    <header class=\"page__header\"><h2>Welcome!</h2><p>Please login.</p></header>\r\n    <main class=\"main\">\r\n      <div class=\"login__panel\">\r\n        <p class=\"prompt\">Please Log in: </p>\r\n        <div class=\"login__form\">\r\n          <label>\r\n              Username:\r\n              <input class=\"info__input\" type=\"text\" name=\"username\" required>\r\n          </label>\r\n          <button class=\"login__button\">Submit</button>\r\n          <span class=\"login__msg\"></span>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  `\r\n}\r\n\r\nexport function renderHome(rootEl, username) {\r\n  rootEl.innerHTML = `\r\n    <header class=\"page__header\"><h2>Welcome! ${username}</h2><button class=\"logout__button\">Log out</button></header>\r\n    <main class=\"main\">\r\n      <div class=\"chat\">\r\n        <ul class=\"user__list\"></ul>\r\n        <div class=\"message\">\r\n            <ul class=\"msg__list\"></ul>\r\n            <div class=\"msg__input\">\r\n                <input class=\"input__msg\"/>\r\n                <button class=\"send_msg\">Send</button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  `\r\n}\r\n\r\nexport function renderUserList(users) {\r\n  const userList = document.querySelector('.user__list');\r\n  userList.innerHTML = users.map((user) => `<li class=\"user__list__item\">${user.username}</li>`).join(\"\");\r\n}\r\n\r\nexport function renderMsgList() {\r\n  const msgList = document.querySelector('.msg__list');\r\n  msgList.innerHTML = `\r\n    <li class=\"msg__list__item\">\r\n        <p class=\"msg__user\">user1</p>\r\n        <p class=\"msg__text\">hello word!</p>\r\n    </li>\r\n    <li class=\"msg__list__item\">\r\n        <p class=\"msg__user\">user1</p>\r\n        <p class=\"msg__text\">hello word!hello word!hello word!hello word!hello word!hello word!hello word!hello word!hello word!</p>\r\n    </li>\r\n  `\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {checkSession, fetchLogin, fetchUsers, logout} from './services';\r\nimport {renderLogin, renderHome, renderUserList, renderMsgList} from './view'\r\n\r\nconst rootEl = document.querySelector('#root');\r\nconst loading = document.querySelector('.loading');\r\n\r\nrootEl.addEventListener('click', (e) => {\r\n  if(e.target.classList.contains('login__button')) {\r\n    const username = document.getElementsByClassName('info__input')[0].value;\r\n    doLogin(username);\r\n  }\r\n\r\n  if (e.target.classList.contains('logout__button')) {\r\n    logout()\r\n      .then(res => {\r\n        renderLogin(rootEl);\r\n      });\r\n  }\r\n});\r\n\r\nfunction doLogin(username) {\r\n  fetchLogin(username)\r\n    .then(res => {\r\n      document.getElementsByClassName('login__msg')[0].innerText = '';\r\n      getHome(res.username);\r\n    })\r\n    .catch(error => {\r\n      document.getElementsByClassName('login__msg')[0].innerText = error.error;\r\n    })\r\n}\r\n\r\nfunction getHome(username) {\r\n  renderHome(rootEl, username);\r\n  doFetchUsers();\r\n  doFetchMessages();\r\n}\r\n\r\nfunction doFetchUsers() {\r\n  fetchUsers()\r\n    .then(res => {\r\n      console.log(res)\r\n      renderUserList(res.users);\r\n    })\r\n    .catch(error => {})\r\n}\r\n\r\nfunction doFetchMessages() {\r\n  renderMsgList();\r\n}\r\n\r\ncheckSession()\r\n  .then(res => {\r\n    getHome(res.username);\r\n    loading.style.display = 'none';\r\n  })\r\n  .catch(error => {\r\n    renderLogin(rootEl);\r\n    loading.style.display = 'none';\r\n  });"],"names":["fetchLogin","username","fetch","method","headers","body","JSON","stringify","err","Promise","reject","error","then","response","ok","json","checkSession","logout","fetchUsers","renderLogin","rootEl","innerHTML","renderHome","concat","renderUserList","users","userList","document","querySelector","map","user","join","renderMsgList","msgList","loading","addEventListener","e","target","classList","contains","getElementsByClassName","value","doLogin","res","innerText","getHome","doFetchUsers","doFetchMessages","console","log","style","display"],"sourceRoot":""}